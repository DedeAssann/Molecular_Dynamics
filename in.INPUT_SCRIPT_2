# (1) Defining units boundary conditions and atom_style

units                metal
boundary             p p p
atom_style           charge
variable	stp	equal	100	# definig the step variable

# (2) Specification of potential type and cut off

print "The number of steps I will run is = ${stp}"   # Just a good old print!

region bigbox block	0 100 0 100 0 100 units box

# - 'region' refers to an abstract region of space
# - 'bigbox' is just an ID assigned to this region of space, that can be used later to refer to it
# - 'units box' refers to the fact that the size of the box is specified in the units as given
# in the units command

# Creating the simulation box
# create_box N ID
# N : number of atoms to use in the sim
# ID : a user-chosen descriptive name for the sim box

create_box 2 bigbox

region smallbox block 40 60 40 60 40 60 units box

# Set of points in space
lattice sc 1.0

# create atoms randomly 36 ${seed}
create_atoms 1 random 36 smallbox

# set the mass for all atoms
mass * 12.017

# Define the interatomic potential
pair_style airebo 3.0 1 0 # 3.0 for REBO potential, 1 for Lennard-Jones potential and not
# including the torsional energy of those bonds (0)
pair_coeff * * CH.airebo C H

# This command sets parameters that affect the building of pairwise neighbor lists
# neighbor skin style
# skin : extra distancve beyond force cutoff (distance units)
# style : bin or nsq or multi or multi/old
neighbor 0.3 bin
# neigh_modify 
neigh_modify delay 0 every 1 check yes

# set initial velocity to all atoms
velocity all create 0.0001 1563967 rot yes dist again

# setup of the annealing method
# Run MD Heating
fix 2 all nve
fix 3 all temp/berendsen 0.0${tempchauff} ${Tdamp}
fix 4 all momentum 1 linear 1 1 1 angular rescale
timestep ${timestep}

# Calcul des energies
compute 0 all pair airebo
variable REBO equal c_0[1]
variable LJ equal c_0[2]
variable TORSION equal c_0[3]

# print the thermodynamic and structural properties of the system
thermo 1000000
thermo_style custom step temp etotal epair ebond pe ke v_REBO v_LJ v_TORSION
dump 1 all cfg 1000000 ./dump/dump.tensile_*.cfg mass type xs ys zs vx vy vz mass q
dump 2 all atom 1000000 tmp.dump
run ${iter}
write_restart endconf*1.restart

# Run MD wait phase : relaxation at Tmax
unfix 3
thermo 1000000
thermo_style custom temp etotal epair ebond pe ke
fix 6 all temp/berendsen ${tempchauff} ${tempchauff} ${Tdamp}
run ${iterther}
write_restart endconf*2.restart
# Run MD cooling phase down to T=0K
unfix 6
thermo 1000000
thermo_style custom step temp etotal epair ebond pe ke
fix 7 all temp/berendsen ${tempchauff} 0.0 ${Tdamp}
run ${iter}
write_restart endconf*3.restart
